{"version":3,"file":"index-ai3qNkbx.js","sources":["../../main.js"],"sourcesContent":["// API Configuration\nconst API_BASE_URL = window.location.hostname === 'localhost'\n  ? \"/api\"  // Sviluppo locale con proxy\n  : \"https://gestionespese.onrender.com/api\"  // Produzione\n\n// Controllo connessione all'avvio\nasync function checkConnection() {\n  try {\n    const response = await fetch(`${API_BASE_URL}/health`)\n    const data = await response.json()\n\n    if (response.ok) {\n      console.log(\"✅ Connessione backend OK:\", data.message)\n      return true\n    } else {\n      console.error(\"❌ Backend non raggiungibile\")\n      return false\n    }\n  } catch (error) {\n    console.error(\"❌ Errore connessione backend:\", error)\n    return false\n  }\n}\n\n// State Management\nclass AppState {\n  constructor() {\n    this.user = null\n    this.token = localStorage.getItem(\"token\")\n    this.expenses = []\n    this.currentPage = \"welcome\"\n  }\n\n  setUser(user, token) {\n    this.user = user\n    this.token = token\n    localStorage.setItem(\"token\", token)\n  }\n\n  clearUser() {\n    this.user = null\n    this.token = null\n    localStorage.removeItem(\"token\")\n  }\n\n  isAuthenticated() {\n    return !!this.token\n  }\n}\n\n// API Service\nclass ApiService {\n  constructor(state) {\n    this.state = state\n  }\n\n  async request(endpoint, options = {}) {\n    const url = `${API_BASE_URL}${endpoint}`\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...options.headers,\n      },\n      ...options,\n    }\n\n    if (this.state.token) {\n      config.headers.Authorization = `Bearer ${this.state.token}`\n    }\n\n    try {\n      const response = await fetch(url, config)\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.message || \"Errore nella richiesta\")\n      }\n\n      return data\n    } catch (error) {\n      console.error(\"API Error:\", error)\n      throw error\n    }\n  }\n\n  // Auth endpoints\n  async signup(email, password) {\n    return this.request(\"/auth/signup\", {\n      method: \"POST\",\n      body: JSON.stringify({ email, password }),\n    })\n  }\n\n  async login(email, password) {\n    return this.request(\"/auth/login\", {\n      method: \"POST\",\n      body: JSON.stringify({ email, password }),\n    })\n  }\n\n  // Expense endpoints\n  async getExpenses(filters = {}) {\n    const params = new URLSearchParams()\n    Object.keys(filters).forEach((key) => {\n      if (filters[key]) params.append(key, filters[key])\n    })\n\n    const query = params.toString()\n    return this.request(`/expenses${query ? `?${query}` : \"\"}`)\n  }\n\n  async createExpense(expense) {\n    return this.request(\"/expenses\", {\n      method: \"POST\",\n      body: JSON.stringify(expense),\n    })\n  }\n\n  async updateExpense(id, expense) {\n    return this.request(`/expenses/${id}`, {\n      method: \"PUT\",\n      body: JSON.stringify(expense),\n    })\n  }\n\n  async deleteExpense(id) {\n    return this.request(`/expenses/${id}`, {\n      method: \"DELETE\",\n    })\n  }\n}\n\n// UI Service\nclass UIService {\n  constructor() {\n    this.currentPage = null\n  }\n\n  showPage(pageId) {\n    console.log(`🔄 Switching to page: ${pageId}`)\n\n    // Hide all pages\n    const allPages = document.querySelectorAll(\".page\")\n    console.log(`Found ${allPages.length} pages`)\n\n    allPages.forEach((page) => {\n      console.log(`Hiding page: ${page.id}`)\n      page.classList.remove(\"active\")\n    })\n\n    // Show target page\n    const targetPage = document.getElementById(pageId)\n    console.log(`Target page:`, targetPage)\n\n    if (targetPage) {\n      targetPage.classList.add(\"active\")\n      this.currentPage = pageId\n      console.log(`✅ Successfully switched to ${pageId}`)\n    } else {\n      console.error(`❌ Page ${pageId} not found`)\n    }\n  }\n\n  showToast(message, type = \"info\") {\n    const container = document.getElementById(\"toast-container\")\n    const toast = document.createElement(\"div\")\n    toast.className = `toast ${type}`\n    toast.textContent = message\n\n    container.appendChild(toast)\n\n    // Auto remove after 5 seconds\n    setTimeout(() => {\n      if (toast.parentNode) {\n        toast.parentNode.removeChild(toast)\n      }\n    }, 5000)\n  }\n\n  showModal(modalId) {\n    const modal = document.getElementById(modalId)\n    if (modal) {\n      modal.classList.remove(\"hidden\")\n    }\n  }\n\n  hideModal(modalId) {\n    const modal = document.getElementById(modalId)\n    if (modal) {\n      modal.classList.add(\"hidden\")\n    }\n  }\n\n  formatCurrency(amount) {\n    return new Intl.NumberFormat(\"it-IT\", {\n      style: \"currency\",\n      currency: \"EUR\",\n    }).format(amount)\n  }\n\n  formatDate(date) {\n    return new Intl.DateTimeFormat(\"it-IT\").format(new Date(date))\n  }\n\n  setLoading(elementId, isLoading) {\n    const element = document.getElementById(elementId)\n    if (element) {\n      if (isLoading) {\n        element.classList.remove(\"hidden\")\n      } else {\n        element.classList.add(\"hidden\")\n      }\n    }\n  }\n}\n\n// Main App Class\nclass ExpenseTracker {\n  constructor() {\n    this.state = new AppState()\n    this.api = new ApiService(this.state)\n    this.ui = new UIService()\n    this.currentFilters = {}\n\n    this.init()\n  }\n\n  async init() {\n    // Controlla connessione backend\n    const connected = await checkConnection()\n    if (!connected) {\n      this.ui.showToast(\"Errore connessione backend. Verifica che il server sia avviato.\", \"error\")\n    }\n\n    this.setupEventListeners()\n    this.checkAuthStatus()\n  }\n\n  checkAuthStatus() {\n    if (this.state.isAuthenticated()) {\n      this.showDashboard()\n    } else {\n      this.ui.showPage(\"welcome-page\")\n    }\n  }\n\n  setupEventListeners() {\n    // Welcome page\n    console.log(\"🔧 Setting up event listeners...\")\n\n    const loginBtn = document.getElementById(\"login-btn\")\n    const signupBtn = document.getElementById(\"signup-btn\")\n\n    console.log(\"Login button:\", loginBtn)\n    console.log(\"Signup button:\", signupBtn)\n\n    if (loginBtn) {\n      loginBtn.addEventListener(\"click\", () => {\n        console.log(\"🔘 Login button clicked!\")\n        this.ui.showPage(\"login-page\")\n      })\n    } else {\n      console.error(\"❌ Login button not found!\")\n    }\n\n    if (signupBtn) {\n      signupBtn.addEventListener(\"click\", () => {\n        console.log(\"🔘 Signup button clicked!\")\n        this.ui.showPage(\"signup-page\")\n      })\n    } else {\n      console.error(\"❌ Signup button not found!\")\n    }\n\n    // Auth navigation\n    document.getElementById(\"switch-to-signup\").addEventListener(\"click\", (e) => {\n      e.preventDefault()\n      this.ui.showPage(\"signup-page\")\n    })\n\n    document.getElementById(\"switch-to-login\").addEventListener(\"click\", (e) => {\n      e.preventDefault()\n      this.ui.showPage(\"login-page\")\n    })\n\n    document.getElementById(\"back-to-welcome-from-login\").addEventListener(\"click\", () => {\n      this.ui.showPage(\"welcome-page\")\n    })\n\n    document.getElementById(\"back-to-welcome-from-signup\").addEventListener(\"click\", () => {\n      this.ui.showPage(\"welcome-page\")\n    })\n\n    // Auth forms\n    document.getElementById(\"login-form\").addEventListener(\"submit\", (e) => {\n      this.handleLogin(e)\n    })\n\n    document.getElementById(\"signup-form\").addEventListener(\"submit\", (e) => {\n      this.handleSignup(e)\n    })\n\n    // Dashboard\n    document.getElementById(\"logout-btn\").addEventListener(\"click\", () => {\n      this.handleLogout()\n    })\n\n    document.getElementById(\"expense-form\").addEventListener(\"submit\", (e) => {\n      this.handleAddExpense(e)\n    })\n\n    // Filters\n    document.getElementById(\"apply-filters\").addEventListener(\"click\", () => {\n      this.applyFilters()\n    })\n\n    document.getElementById(\"clear-filters\").addEventListener(\"click\", () => {\n      this.clearFilters()\n    })\n\n    // Modal\n    document.getElementById(\"close-modal\").addEventListener(\"click\", () => {\n      this.ui.hideModal(\"edit-modal\")\n    })\n\n    document.getElementById(\"cancel-edit\").addEventListener(\"click\", () => {\n      this.ui.hideModal(\"edit-modal\")\n    })\n\n    document.getElementById(\"edit-expense-form\").addEventListener(\"submit\", (e) => {\n      this.handleEditExpense(e)\n    })\n\n    // Set today's date as default\n    const today = new Date().toISOString().split(\"T\")[0]\n    document.getElementById(\"expense-date\").value = today\n  }\n\n  async handleLogin(e) {\n    e.preventDefault()\n\n    const email = document.getElementById(\"login-email\").value\n    const password = document.getElementById(\"login-password\").value\n    const submitBtn = e.target.querySelector('button[type=\"submit\"]')\n\n    try {\n      submitBtn.disabled = true\n      submitBtn.textContent = \"Accesso in corso...\"\n\n      const response = await this.api.login(email, password)\n      this.state.setUser(response.user, response.token)\n\n      this.ui.showToast(\"Login effettuato con successo!\", \"success\")\n      this.showDashboard()\n    } catch (error) {\n      this.ui.showToast(error.message, \"error\")\n    } finally {\n      submitBtn.disabled = false\n      submitBtn.textContent = \"Accedi\"\n    }\n  }\n\n  async handleSignup(e) {\n    e.preventDefault()\n\n    const email = document.getElementById(\"signup-email\").value\n    const password = document.getElementById(\"signup-password\").value\n    const submitBtn = e.target.querySelector('button[type=\"submit\"]')\n\n    try {\n      submitBtn.disabled = true\n      submitBtn.textContent = \"Registrazione in corso...\"\n\n      const response = await this.api.signup(email, password)\n      this.state.setUser(response.user, response.token)\n\n      this.ui.showToast(\"Registrazione completata con successo!\", \"success\")\n      this.showDashboard()\n    } catch (error) {\n      this.ui.showToast(error.message, \"error\")\n    } finally {\n      submitBtn.disabled = false\n      submitBtn.textContent = \"Registrati\"\n    }\n  }\n\n  handleLogout() {\n    this.state.clearUser()\n    this.ui.showToast(\"Logout effettuato\", \"info\")\n    this.ui.showPage(\"welcome-page\")\n  }\n\n  async showDashboard() {\n    this.ui.showPage(\"dashboard-page\")\n\n    if (this.state.user) {\n      document.getElementById(\"user-email\").textContent = this.state.user.email\n    }\n\n    await this.loadExpenses()\n  }\n\n  async handleAddExpense(e) {\n    e.preventDefault()\n\n    const expense = {\n      title: document.getElementById(\"expense-title\").value,\n      amount: Number.parseFloat(document.getElementById(\"expense-amount\").value),\n      category: document.getElementById(\"expense-category\").value,\n      date: document.getElementById(\"expense-date\").value,\n    }\n\n    const submitBtn = e.target.querySelector('button[type=\"submit\"]')\n\n    try {\n      submitBtn.disabled = true\n      submitBtn.textContent = \"Aggiungendo...\"\n\n      await this.api.createExpense(expense)\n      this.ui.showToast(\"Spesa aggiunta con successo!\", \"success\")\n\n      // Reset form\n      e.target.reset()\n      const today = new Date().toISOString().split(\"T\")[0]\n      document.getElementById(\"expense-date\").value = today\n\n      await this.loadExpenses()\n    } catch (error) {\n      this.ui.showToast(error.message, \"error\")\n    } finally {\n      submitBtn.disabled = false\n      submitBtn.textContent = \"Aggiungi Spesa\"\n    }\n  }\n\n  async loadExpenses() {\n    try {\n      this.ui.setLoading(\"loading\", true)\n\n      const response = await this.api.getExpenses(this.currentFilters)\n      this.state.expenses = response.expenses\n\n      this.renderExpenses(response.expenses)\n      this.updateSummary(response.expenses, response.totalAmount)\n\n      this.ui.setLoading(\"loading\", false)\n\n      if (response.expenses.length === 0) {\n        document.getElementById(\"no-expenses\").classList.remove(\"hidden\")\n      } else {\n        document.getElementById(\"no-expenses\").classList.add(\"hidden\")\n      }\n    } catch (error) {\n      this.ui.setLoading(\"loading\", false)\n      this.ui.showToast(\"Errore nel caricamento delle spese\", \"error\")\n    }\n  }\n\n  renderExpenses(expenses) {\n    const container = document.getElementById(\"expenses-list\")\n\n    if (expenses.length === 0) {\n      container.innerHTML = \"\"\n      return\n    }\n\n    container.innerHTML = expenses\n      .map(\n        (expense) => `\n      <div class=\"expense-item\">\n        <div class=\"expense-info\">\n          <h4>${expense.title}</h4>\n          <div class=\"expense-meta\">\n            <span>📅 ${this.ui.formatDate(expense.date)}</span>\n            <span>🏷️ ${expense.category}</span>\n          </div>\n        </div>\n        <div class=\"expense-amount\">${this.ui.formatCurrency(expense.amount)}</div>\n        <div class=\"expense-actions\">\n          <button class=\"btn btn-edit\" onclick=\"app.editExpense('${expense.id}')\">\n            Modifica\n          </button>\n          <button class=\"btn btn-danger\" onclick=\"app.deleteExpense('${expense.id}')\">\n            Elimina\n          </button>\n        </div>\n      </div>\n    `,\n      )\n      .join(\"\")\n  }\n\n  updateSummary(expenses, totalAmount) {\n    document.getElementById(\"total-amount\").textContent = this.ui.formatCurrency(totalAmount)\n    document.getElementById(\"total-count\").textContent = expenses.length\n  }\n\n  editExpense(id) {\n    const expense = this.state.expenses.find((e) => e.id === id)\n    if (!expense) return\n\n    // Populate edit form\n    document.getElementById(\"edit-expense-id\").value = expense.id\n    document.getElementById(\"edit-expense-title\").value = expense.title\n    document.getElementById(\"edit-expense-amount\").value = expense.amount\n    document.getElementById(\"edit-expense-category\").value = expense.category\n    document.getElementById(\"edit-expense-date\").value = expense.date.split(\"T\")[0]\n\n    this.ui.showModal(\"edit-modal\")\n  }\n\n  async handleEditExpense(e) {\n    e.preventDefault()\n\n    const id = document.getElementById(\"edit-expense-id\").value\n    const expense = {\n      title: document.getElementById(\"edit-expense-title\").value,\n      amount: Number.parseFloat(document.getElementById(\"edit-expense-amount\").value),\n      category: document.getElementById(\"edit-expense-category\").value,\n      date: document.getElementById(\"edit-expense-date\").value,\n    }\n\n    const submitBtn = e.target.querySelector('button[type=\"submit\"]')\n\n    try {\n      submitBtn.disabled = true\n      submitBtn.textContent = \"Salvando...\"\n\n      await this.api.updateExpense(id, expense)\n      this.ui.showToast(\"Spesa aggiornata con successo!\", \"success\")\n      this.ui.hideModal(\"edit-modal\")\n\n      await this.loadExpenses()\n    } catch (error) {\n      this.ui.showToast(error.message, \"error\")\n    } finally {\n      submitBtn.disabled = false\n      submitBtn.textContent = \"Salva Modifiche\"\n    }\n  }\n\n  async deleteExpense(id) {\n    if (!confirm(\"Sei sicuro di voler eliminare questa spesa?\")) {\n      return\n    }\n\n    try {\n      await this.api.deleteExpense(id)\n      this.ui.showToast(\"Spesa eliminata con successo!\", \"success\")\n      await this.loadExpenses()\n    } catch (error) {\n      this.ui.showToast(error.message, \"error\")\n    }\n  }\n\n  applyFilters() {\n    this.currentFilters = {\n      category: document.getElementById(\"filter-category\").value,\n      startDate: document.getElementById(\"filter-start-date\").value,\n      endDate: document.getElementById(\"filter-end-date\").value,\n    }\n\n    // Remove empty filters\n    Object.keys(this.currentFilters).forEach((key) => {\n      if (!this.currentFilters[key] || this.currentFilters[key] === \"all\") {\n        delete this.currentFilters[key]\n      }\n    })\n\n    this.loadExpenses()\n  }\n\n  clearFilters() {\n    this.currentFilters = {}\n    document.getElementById(\"filter-category\").value = \"all\"\n    document.getElementById(\"filter-start-date\").value = \"\"\n    document.getElementById(\"filter-end-date\").value = \"\"\n    this.loadExpenses()\n  }\n}\n\n// Initialize app quando DOM è pronto\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const app = new ExpenseTracker()\n\n  // Make app globally available for onclick handlers\n  window.app = app\n\n  console.log(\"🎉 Expense Tracker inizializzato!\")\n})\n"],"names":["API_BASE_URL","checkConnection","response","data","error","AppState","user","token","ApiService","state","endpoint","options","url","config","email","password","filters","params","key","query","expense","id","UIService","pageId","allPages","page","targetPage","message","type","container","toast","modalId","modal","amount","date","elementId","isLoading","element","ExpenseTracker","loginBtn","signupBtn","e","today","submitBtn","expenses","totalAmount","app"],"mappings":"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"}